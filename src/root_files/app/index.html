<!DOCTYPE html>
<html>
    <head>
        <style id="antiClickjack">body{display:none !important;}</style>
        <script type="text/javascript">
            /* hardcode redirect for crawlers */
            if (/ia_archiver|bot|googlebot|crawler|spider|robot|crawling/i.test(navigator.userAgent)) {
                window.location = '/trading.html';
            }
            if (self === top) {
                var antiClickjack = document.getElementById("antiClickjack");
                antiClickjack.parentNode.removeChild(antiClickjack);
            } else {
                top.location = self.location;
            }
        </script>
        <title>Deriv</title>
        <meta charset="utf-8" />
        <meta name="google-site-verification" content="Myh35QddfEArh0686LcO2zMjrgv0C7L4FCBU0k0oZvU" />
        <meta name='referrer' content='origin' />
        <meta name='version' content='1.0' />
        <script type="text/javascript">
            function getCookieItem(sKey) {
                'use strict';
                if (!sKey) { return null; }
                return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*" + encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*([^;]*).*$)|^.*$"), "$1")) || null;
            }

            function redirect() {
                var search                = window.location.search ? window.location.search : '';
                var has_external_referrer = document.referrer && !/\.(binary\.(com|me)|deriv\.com)/.test(document.referrer);
                var has_utm_source        = /utm_source/.test(search);
                var utm_source            = has_external_referrer && !has_utm_source ? ((search ? '&' : '?') + 'utm_source=' + new URL(document.referrer).hostname) : '';
                
                window.location.href = '/trading.html' + (search || utm_source ? '?' + search.replace(/^\?/, '') + (search && utm_source ? '&' : '') + utm_source.replace(/^\?/, '') : '');
            }

            // Handle Crowdin in-context translation
            if (/^https:\/\/staging\.binary\.com\/translations\//i.test(window.location.href)) {
                localStorage.setItem('i18n_language', JSON.stringify('ACH'));
                window.location.href = '/trading.html';
            } else {
                // Check if language is already set in localStorage or cookie
                var storedLang = localStorage.getItem('i18n_language');
                var cookieLang = getCookieItem('language');
                
                if (!storedLang && cookieLang) {
                    // Migrate from cookie to localStorage
                    localStorage.setItem('i18n_language', JSON.stringify(cookieLang.toUpperCase()));
                } else if (!storedLang && !cookieLang) {
                    // Set default language for first-time visitors
                    localStorage.setItem('i18n_language', JSON.stringify('EN'));
                }
                
                redirect();
            }
        </script>
    </head>
</html>
